{"version":3,"sources":["webpack:///./src/views/Article.vue?deb4","webpack:///./src/apis/responses.js","webpack:///src/views/Article.vue","webpack:///./src/views/Article.vue?9fff","webpack:///./src/views/Article.vue?78e3","webpack:///./src/views/Article.vue?72cb"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","_v","_s","article","title","attrs","User","photo","fakePhoto","name","relativeTimeFromNow","createdAt","params","id","Category","permission","content","on","$event","isShowResponse","currentUser","stopPropagation","preventDefault","removeArticle","_e","directives","rawName","value","expression","ref","form","minRows","model","callback","$$v","$set","handleSubmit","_m","_l","key","dialogVisible","editResponseId","reviseForm","removeReponse","slot","editResponse","staticRenderFns","postResponse","articleId","data","apiHelper","post","putResponse","put","deleteResponse","delete","Responses","isDeleteProcessing","isProcessing","editResponseContent","created","fetchArticle","methods","computed","component"],"mappings":"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","file":"js/chunk-370b3b12.3ed7cc25.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"font-roboto bg-gray-100 overflow-auto\",staticStyle:{\"height\":\"80%\"}},[_c('div',{staticClass:\"px-6 py-8\"},[_c('div',{staticClass:\"flex justify-center container mx-auto\"},[_c('div',{staticClass:\"w-full lg:w-8/12\"},[_c('div',{staticClass:\"mt-6\"},[_c('div',{staticClass:\"max-w-4xl px-10 py-6 bg-white rounded-lg shadow-md\"},[_c('h1',{staticClass:\"text-4xl text-gray-700 font-bold\"},[_vm._v(\" \"+_vm._s(_vm.article.title)+\" \")]),_c('div',{staticClass:\"flex items-center\"},[_c('img',{staticClass:\"mx-4 w-10 h-10 object-cover rounded-full hidden sm:block\",attrs:{\"src\":_vm.article.User.photo || _vm.fakePhoto,\"alt\":\"avatar\"}}),_c('h2',{staticClass:\"text-gray-700 font-bold\"},[_vm._v(\" \"+_vm._s(_vm.article.User.name)+\" \")])]),_c('div',{}),_c('div',{staticClass:\"flex justify-between items-center\"},[_c('span',{staticClass:\"font-light text-gray-600\"},[_vm._v(_vm._s(_vm.relativeTimeFromNow(_vm.article.createdAt)))]),_c('router-link',{staticClass:\"px-2 py-1 bg-gray-600 text-gray-100 font-bold rounded hover:bg-gray-500\",attrs:{\"to\":{\n                  name: 'categories',\n                  params: { id: _vm.article.Category.id }\n                }}},[_vm._v(_vm._s(_vm.article.Category.name))])],1),_c('div',{staticClass:\"mt-2\"},[_c('div',{},[_c('p',{staticClass:\"mt-2 text-orange-500\"},[_vm._v(\" 觀看權限: \"+_vm._s(_vm.article.permission)+\" \")])]),_c('p',{staticClass:\"mt-2 text-gray-600 truncate\"},[_vm._v(_vm._s(_vm.article.content))])]),_c('div',{staticClass:\"flex justify-between items-center mt-4\"},[_c('p',{staticClass:\"mt-2 text-gray-600\"}),_c('div',[_c('button',{staticClass:\"px-6 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-yellow-600 rounded-lg hover:bg-yellow-500 focus:outline-none focus:ring focus:ring-yellow-300 focus:ring-opacity-80 mr-5\",on:{\"click\":function($event){_vm.isShowResponse = !_vm.isShowResponse}}},[_vm._v(\" 回覆 \")]),(_vm.currentUser.id === _vm.article.User.id)?[_c('button',{staticClass:\"px-6 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-blue-600 rounded-lg hover:bg-blue-500 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-80 mr-5\"},[_c('router-link',{attrs:{\"to\":{\n                        name: 'edit-article',\n                        params: { id: _vm.article.id }\n                      }}},[_vm._v(\"編輯\")])],1),_c('button',{staticClass:\"px-6 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-red-600 rounded-lg hover:bg-red-500 focus:outline-none focus:ring focus:ring-red-300 focus:ring-opacity-80\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.removeArticle(_vm.article.id, _vm.article.title)}}},[_vm._v(\" 刪除 \")])]:_vm._e()],2)])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowResponse),expression:\"isShowResponse\"}],staticClass:\"max-w-4xl px-10 py-6 rounded-lg shadow-md mt-5\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"120px\"}},[_c('p',[_vm._v(_vm._s(_vm.currentUser.name)+\" 想回覆\")]),_c('el-input',{staticClass:\"mt-4\",attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 2 }},model:{value:(_vm.form.content),callback:function ($$v) {_vm.$set(_vm.form, \"content\", $$v)},expression:\"form.content\"}}),(_vm.isProcessing)?_c('el-button',{staticClass:\"w-24\",attrs:{\"type\":\"primary\"}},[_c('span',{staticClass:\"spinner small-spinner\"})]):_c('el-button',{staticClass:\"w-24 mt-3\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleSubmit(_vm.article.id)}}},[_vm._v(\"送出回覆\")])],1)],1)])])]),_vm._m(0),_vm._l((_vm.article.Responses),function(ref){\n                      var content = ref.content;\n                      var id = ref.id;\n                      var createdAt = ref.createdAt;\n                      var User = ref.User;\nreturn _c('div',{key:id,staticClass:\"flex justify-center container mx-auto\"},[_c('div',{staticClass:\"w-full lg:w-8/12\"},[_c('div',{staticClass:\"mt-6\"},[_c('div',{staticClass:\"max-w-4xl px-10 py-6 bg-white rounded-lg shadow-md\"},[_c('div',{staticClass:\"flex items-center\"},[_c('img',{staticClass:\"mx-4 w-10 h-10 object-cover rounded-full hidden sm:block\",attrs:{\"src\":User.photo || _vm.fakePhoto,\"alt\":\"avatar\"}}),_c('h2',{staticClass:\"text-gray-700 font-bold hover:underline\"},[_vm._v(\" \"+_vm._s(User.name)+\" \")])]),_c('span',{staticClass:\"font-light text-gray-600\"},[_vm._v(_vm._s(_vm.relativeTimeFromNow(createdAt)))]),_c('h1',{staticClass:\"text-2xl text-gray-700\"},[_vm._v(\" \"+_vm._s(content)+\" \")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentUser.id === User.id),expression:\"currentUser.id === User.id\"}],staticClass:\"flex justify-end items-center mt-4\"},[_c('button',{staticClass:\"px-6 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-blue-600 rounded-lg hover:bg-blue-500 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-80 mr-5\",on:{\"click\":function($event){_vm.dialogVisible = true\n                  _vm.editResponseId = id\n                  _vm.reviseForm.content = content}}},[_vm._v(\" 編輯 \")]),_c('button',{staticClass:\"px-6 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-red-600 rounded-lg hover:bg-red-500 focus:outline-none focus:ring focus:ring-red-300 focus:ring-opacity-80\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.removeReponse(id, content)}}},[_vm._v(\" 刪除 \")])])])])])])}),_c('el-dialog',{attrs:{\"title\":\"回覆\",\"visible\":_vm.dialogVisible,\"close-on-click-modal\":false,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('span',[_vm._v(\"修改內容為\")]),_c('el-input',{staticClass:\"mt-2\",attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 2 }},model:{value:(_vm.reviseForm.content),callback:function ($$v) {_vm.$set(_vm.reviseForm, \"content\", $$v)},expression:\"reviseForm.content\"}}),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.editResponse()}}},[_vm._v(\"送出\")])],1)],1)],2)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flex justify-center container mx-auto\"},[_c('div',{staticClass:\"w-full lg:w-8/12\"},[_c('div',{staticClass:\"mt-6\"},[_c('div',{staticClass:\"max-w-4xl px-10 py-6 bg-white rounded-lg shadow-md\"},[_c('h3',{staticClass:\"text-xl text-gray-700\"},[_vm._v(\"回覆\")])])])])])}]\n\nexport { render, staticRenderFns }","import { apiHelper } from '../utils/helpers'\r\n\r\nexport default {\r\n  postResponse(articleId, data) {\r\n    return apiHelper.post(`/responses/${articleId}`, { ...data })\r\n  },\r\n  putResponse(id, data) {\r\n    return apiHelper.put(`/responses/${id}`, { ...data })\r\n  },\r\n  deleteResponse(id) {\r\n    return apiHelper.delete(`/responses/${id}`)\r\n  }\r\n}\r\n","<template>\r\n  <div class=\"font-roboto bg-gray-100 overflow-auto\" style=\"height: 80%;\">\r\n    <div class=\"px-6 py-8\">\r\n      <div class=\"flex justify-center container mx-auto\">\r\n        <div class=\"w-full lg:w-8/12\">\r\n          <div class=\"mt-6\">\r\n            <div class=\"max-w-4xl px-10 py-6 bg-white rounded-lg shadow-md\">\r\n              <h1 class=\"text-4xl text-gray-700 font-bold\">\r\n                {{ article.title }}\r\n              </h1>\r\n              <div class=\"flex items-center\">\r\n                <img\r\n                  class=\"mx-4 w-10 h-10 object-cover rounded-full hidden sm:block\"\r\n                  :src=\"article.User.photo || fakePhoto\"\r\n                  alt=\"avatar\"\r\n                />\r\n                <h2 class=\"text-gray-700 font-bold\">\r\n                  {{ article.User.name }}\r\n                </h2>\r\n              </div>\r\n              <div class=\"\">\r\n                <!-- <a\r\n                  class=\"px-2 py-1 bg-gray-600 text-gray-100 font-bold rounded hover:bg-gray-500\"\r\n                  href=\"#\"\r\n                  >{{ article.Category.name }}</a\r\n                > -->\r\n              </div>\r\n              <div class=\"flex justify-between items-center\">\r\n                <span class=\"font-light text-gray-600\">{{\r\n                  relativeTimeFromNow(article.createdAt)\r\n                }}</span>\r\n                <router-link\r\n                  :to=\"{\r\n                    name: 'categories',\r\n                    params: { id: article.Category.id }\r\n                  }\"\r\n                  class=\"px-2 py-1 bg-gray-600 text-gray-100 font-bold rounded hover:bg-gray-500\"\r\n                  >{{ article.Category.name }}</router-link\r\n                >\r\n              </div>\r\n              <div class=\"mt-2\">\r\n                <div class=\"\">\r\n                  <p class=\"mt-2 text-orange-500\">\r\n                    觀看權限: {{ article.permission }}\r\n                  </p>\r\n                </div>\r\n                <p class=\"mt-2 text-gray-600 truncate\">{{ article.content }}</p>\r\n              </div>\r\n              <div class=\"flex justify-between items-center mt-4\">\r\n                <p class=\"mt-2 text-gray-600\"></p>\r\n                <!-- {{ article.clapCount }} -->\r\n\r\n                <div>\r\n                  <button\r\n                    @click=\"isShowResponse = !isShowResponse\"\r\n                    class=\"px-6 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-yellow-600 rounded-lg hover:bg-yellow-500 focus:outline-none focus:ring focus:ring-yellow-300 focus:ring-opacity-80 mr-5\"\r\n                  >\r\n                    回覆\r\n                  </button>\r\n                  <template v-if=\"currentUser.id === article.User.id\">\r\n                    <button\r\n                      class=\"px-6 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-blue-600 rounded-lg hover:bg-blue-500 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-80 mr-5\"\r\n                    >\r\n                      <router-link\r\n                        :to=\"{\r\n                          name: 'edit-article',\r\n                          params: { id: article.id }\r\n                        }\"\r\n                        >編輯</router-link\r\n                      >\r\n                    </button>\r\n\r\n                    <button\r\n                      @click.stop.prevent=\"\r\n                        removeArticle(article.id, article.title)\r\n                      \"\r\n                      class=\"px-6 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-red-600 rounded-lg hover:bg-red-500 focus:outline-none focus:ring focus:ring-red-300 focus:ring-opacity-80\"\r\n                    >\r\n                      刪除\r\n                    </button>\r\n                  </template>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- 回覆表格 start -->\r\n            <div\r\n              v-show=\"isShowResponse\"\r\n              class=\"max-w-4xl px-10 py-6 rounded-lg shadow-md mt-5\"\r\n            >\r\n              <el-form ref=\"form\" :model=\"form\" label-width=\"120px\">\r\n                <p>{{ currentUser.name }} 想回覆</p>\r\n                <el-input\r\n                  type=\"textarea\"\r\n                  :autosize=\"{ minRows: 2 }\"\r\n                  v-model=\"form.content\"\r\n                  class=\"mt-4\"\r\n                ></el-input>\r\n                <el-button v-if=\"isProcessing\" type=\"primary\" class=\"w-24\">\r\n                  <span class=\"spinner small-spinner\"></span>\r\n                </el-button>\r\n                <el-button\r\n                  v-else\r\n                  type=\"primary\"\r\n                  class=\"w-24 mt-3\"\r\n                  @click=\"handleSubmit(article.id)\"\r\n                  >送出回覆</el-button\r\n                >\r\n                <!-- <el-button>Cancel</el-button> -->\r\n              </el-form>\r\n            </div>\r\n            <!-- 回覆表格 end-->\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 所有回覆 start -->\r\n      <div class=\"flex justify-center container mx-auto\">\r\n        <div class=\"w-full lg:w-8/12\">\r\n          <div class=\"mt-6\">\r\n            <div class=\"max-w-4xl px-10 py-6 bg-white rounded-lg shadow-md\">\r\n              <h3 class=\"text-xl text-gray-700\">回覆</h3>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div\r\n        v-for=\"{ content, id, createdAt, User } in article.Responses\"\r\n        :key=\"id\"\r\n        class=\"flex justify-center container mx-auto\"\r\n      >\r\n        <div class=\"w-full lg:w-8/12\">\r\n          <div class=\"mt-6\">\r\n            <div class=\"max-w-4xl px-10 py-6 bg-white rounded-lg shadow-md\">\r\n              <!-- <div>\r\n                <a class=\"flex items-center\" href=\"#\">\r\n                  <img\r\n                    class=\"mx-4 w-10 h-10 object-cover rounded-full hidden sm:block\"\r\n                    :src=\"article.image\"\r\n                    alt=\"avatar\"\r\n                  />\r\n                </a>\r\n              </div> -->\r\n\r\n              <div class=\"flex items-center\">\r\n                <img\r\n                  class=\"mx-4 w-10 h-10 object-cover rounded-full hidden sm:block\"\r\n                  :src=\"User.photo || fakePhoto\"\r\n                  alt=\"avatar\"\r\n                />\r\n                <h2 class=\"text-gray-700 font-bold hover:underline\">\r\n                  {{ User.name }}\r\n                </h2>\r\n              </div>\r\n              <span class=\"font-light text-gray-600\">{{\r\n                relativeTimeFromNow(createdAt)\r\n              }}</span>\r\n              <h1 class=\"text-2xl text-gray-700\">\r\n                {{ content }}\r\n              </h1>\r\n              <div\r\n                v-show=\"currentUser.id === User.id\"\r\n                class=\"flex justify-end items-center mt-4\"\r\n              >\r\n                <button\r\n                  @click=\"\r\n                    dialogVisible = true\r\n                    editResponseId = id\r\n                    reviseForm.content = content\r\n                  \"\r\n                  class=\"px-6 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-blue-600 rounded-lg hover:bg-blue-500 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-80 mr-5\"\r\n                >\r\n                  編輯\r\n                </button>\r\n                <button\r\n                  @click.stop.prevent=\"removeReponse(id, content)\"\r\n                  class=\"px-6 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-red-600 rounded-lg hover:bg-red-500 focus:outline-none focus:ring focus:ring-red-300 focus:ring-opacity-80\"\r\n                >\r\n                  刪除\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- 所有回覆 end -->\r\n      <el-dialog\r\n        title=\"回覆\"\r\n        :visible.sync=\"dialogVisible\"\r\n        :close-on-click-modal=\"false\"\r\n        width=\"30%\"\r\n      >\r\n        <span>修改內容為</span>\r\n        <el-input\r\n          type=\"textarea\"\r\n          :autosize=\"{ minRows: 2 }\"\r\n          v-model=\"reviseForm.content\"\r\n          class=\"mt-2\"\r\n        ></el-input>\r\n\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n          <el-button @click=\"editResponse()\" type=\"primary\">送出</el-button>\r\n        </span>\r\n      </el-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport articlesAPI from './../apis/articles'\r\nimport responsesAPI from './../apis/responses'\r\nimport { Toast, relativeTimeFromNow } from './../utils/helpers'\r\nimport { mapState } from 'vuex'\r\nimport Swal from 'sweetalert2'\r\nimport { fakePhoto } from './../constants'\r\n\r\nexport default {\r\n  name: 'Article',\r\n\r\n  data() {\r\n    return {\r\n      article: {\r\n        Category: {\r\n          name: ''\r\n        },\r\n        Responses: [\r\n          {\r\n            User: {\r\n              name: ''\r\n            }\r\n          }\r\n        ],\r\n        User: {\r\n          name: ''\r\n        }\r\n      },\r\n      relativeTimeFromNow,\r\n      isDeleteProcessing: false,\r\n      isShowResponse: false,\r\n      form: {\r\n        content: ''\r\n      },\r\n      isProcessing: false,\r\n      dialogVisible: false,\r\n      editResponseId: 0,\r\n      editResponseContent: '',\r\n      reviseForm: {\r\n        content: ''\r\n      },\r\n      fakePhoto\r\n    }\r\n  },\r\n  created() {\r\n    const { id } = this.$route.params\r\n    this.fetchArticle(id)\r\n  },\r\n  methods: {\r\n    async fetchArticle(id) {\r\n      try {\r\n        this.isLoading = true\r\n        const { data } = await articlesAPI.getArticle({ id })\r\n        this.article = data.article\r\n        this.isLoading = false\r\n      } catch (error) {\r\n        this.isLoading = false\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法閱讀此文章，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n    async removeArticle(id, title) {\r\n      Swal.fire({\r\n        text: `確定要刪除 ${title} 這篇文章嗎?`,\r\n        icon: 'warning',\r\n        buttonsStyling: false,\r\n        showCancelButton: true,\r\n        confirmButtonText: '確定',\r\n        customClass: {\r\n          confirmButton:\r\n            'px-6 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-red-600 rounded-lg hover:bg-red-500 focus:outline-none focus:ring focus:ring-red-300 focus:ring-opacity-80',\r\n          cancelButton:\r\n            'px-6 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-green-600 rounded-lg hover:bg-green-500 focus:outline-none focus:ring focus:ring-green-300 focus:ring-opacity-80 mr-5'\r\n        },\r\n        cancelButtonText: '取消',\r\n        reverseButtons: true,\r\n        allowOutsideClick: false,\r\n        heightAuto: false\r\n      }).then(async (result) => {\r\n        if (result.isConfirmed) {\r\n          try {\r\n            this.isDeleteProcessing = true\r\n            const { data } = await articlesAPI.deletArticle(id)\r\n\r\n            if (data.success === true) {\r\n              Toast.fire({\r\n                icon: 'success',\r\n                title: '刪除文章成功'\r\n              })\r\n              setTimeout(() => this.$router.push('/articles'), 1000)\r\n            }\r\n          } catch (error) {\r\n            this.isDeleteProcessing = false\r\n            const errorMessage = error.response.data.message\r\n            Toast.fire({\r\n              icon: 'error',\r\n              title: errorMessage ? errorMessage : '無法刪除文章，請稍後再試'\r\n            })\r\n          }\r\n        }\r\n      })\r\n    },\r\n    async handleSubmit(articleId) {\r\n      try {\r\n        this.isProcessing = true\r\n        const { content } = this.form\r\n        const { data } = await responsesAPI.postResponse(articleId, {\r\n          content\r\n        })\r\n        if (data.success === true) {\r\n          const addedResponse = {\r\n            ...data.response,\r\n            User: {\r\n              name: this.currentUser.name,\r\n              id: this.currentUser.id\r\n            }\r\n          }\r\n          this.article.Responses.unshift(addedResponse)\r\n          this.form.content = ''\r\n          // this.$router.go()\r\n        }\r\n        this.isProcessing = false\r\n      } catch (error) {\r\n        this.isProcessing = false\r\n        const errorMessage = error.response.data.message\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: errorMessage ? errorMessage : '無法回覆文章'\r\n        })\r\n      }\r\n    },\r\n    async editResponse() {\r\n      try {\r\n        const { content } = this.reviseForm\r\n        const { data } = await responsesAPI.putResponse(this.editResponseId, {\r\n          content\r\n        })\r\n\r\n        if (data.success === true) {\r\n          const editResponseIndex = this.article.Responses.findIndex(\r\n            (r) => r.id === this.editResponseId\r\n          )\r\n          this.article.Responses[editResponseIndex].content = content\r\n          Toast.fire({\r\n            icon: 'success',\r\n            title: '編輯回覆成功'\r\n          })\r\n        }\r\n        this.dialogVisible = false\r\n      } catch (error) {\r\n        const errorMessage = error.response.data.message\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: errorMessage ? errorMessage : '無法編輯回覆'\r\n        })\r\n      }\r\n    },\r\n    async removeReponse(id, content) {\r\n      Swal.fire({\r\n        text: `確定要刪除 ${content} 這篇回復嗎?`,\r\n        icon: 'warning',\r\n        buttonsStyling: false,\r\n        showCancelButton: true,\r\n        confirmButtonText: '確定',\r\n        customClass: {\r\n          confirmButton:\r\n            'px-6 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-red-600 rounded-lg hover:bg-red-500 focus:outline-none focus:ring focus:ring-red-300 focus:ring-opacity-80',\r\n          cancelButton:\r\n            'px-6 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-green-600 rounded-lg hover:bg-green-500 focus:outline-none focus:ring focus:ring-green-300 focus:ring-opacity-80 mr-5'\r\n        },\r\n        cancelButtonText: '取消',\r\n        reverseButtons: true,\r\n        allowOutsideClick: false,\r\n        heightAuto: false\r\n      }).then(async (result) => {\r\n        if (result.isConfirmed) {\r\n          try {\r\n            const { data } = await responsesAPI.deleteResponse(id)\r\n\r\n            if (data.success === true) {\r\n              Toast.fire({\r\n                icon: 'success',\r\n                title: '刪除回覆成功'\r\n              })\r\n              this.article.Responses = this.article.Responses.filter(\r\n                (r) => r.id !== id\r\n              )\r\n            }\r\n          } catch (error) {\r\n            const errorMessage = error.response.data.message\r\n            Toast.fire({\r\n              icon: 'error',\r\n              title: errorMessage ? errorMessage : '無法刪除回覆，請稍後再試'\r\n            })\r\n          }\r\n        }\r\n      })\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['currentUser', 'isAuthenticated'])\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.small-spinner {\r\n  width: 1rem;\r\n  height: 1rem;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Article.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Article.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Article.vue?vue&type=template&id=2a4f04ba&scoped=true&\"\nimport script from \"./Article.vue?vue&type=script&lang=js&\"\nexport * from \"./Article.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Article.vue?vue&type=style&index=0&id=2a4f04ba&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2a4f04ba\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Article.vue?vue&type=style&index=0&id=2a4f04ba&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Article.vue?vue&type=style&index=0&id=2a4f04ba&scoped=true&lang=css&\""],"sourceRoot":""}